@using SKV.PL.ClientSide.Concrete;
@using SKV.PL.ClientSide.Abstract.Components

@using SKV.PL.ClientSide.Components.Widget
@using SKV.PL.ClientSide.Components.DynamicTable

@{ 
    var DTCName = "ctrl";
    var UMCName = "ulCtrl";
}

@section Scripts {
    @Linker.GetDirective("Widget")
    @Linker.GetDirective("CompileHtml")
    @Linker.GetDirective("DynamicTable")

    @Linker.DynamicTableModule()

    @Linker.GetService("Tools")
    @Linker.GetService("Request")
    @Linker.GetService("Location")
}

@Html.Partial("UserManagerController")

@(ComponentFactory.Create<WidgetMvc>()
        .Id("UserManagerWidget")
        .Title(Resources.Resource.UserManager)
        .Body(body =>
        {
            body.Create<DynamicTableMvc>()
                .AngularApplicationName("SKV")
                .AngularTableSettinsFactoryName("UserTableSettingsFactory")
                .AngularDynamicTableControllerName(DTCName)
                .AngularDynamicTableActionsControllerName(UMCName)
                .Columns(columns =>
                {
                    columns.Create<DynamicTableColumnMvc>().Name("UserName").Title(Resources.Resource.UserName).Width(20)
                                    .Type(TableColumnDataType.Text).Editable(true).Filterable(true);

                    columns.Create<DynamicTableColumnMvc>().Name("Email").Title(Resources.Resource.Email).Width(20)
                                    .Type(TableColumnDataType.Text).Editable(true).Filterable(true);

                    columns.Create<DynamicTableColumnMvc>().Name("PhoneNumber").Title(Resources.Resource.PhoneNumber).Width(20)
                                    .Type(TableColumnDataType.Text).Editable(true).Filterable(true);

                    columns.Create<DynamicTableColumnMvc>().Name("Profile.Name").Title(Resources.Resource.UserInitials).Width(20)
                                    .Type(TableColumnDataType.Text).Editable(true).Filterable(true);

                    columns.Create<DynamicTableColumnMvc>().Name("Actions").Title(Resources.Resource.Actions).Width(20)
                                    .Type(TableColumnDataType.Actions).Editable(true).Filterable(false);
                });
        })
        .Render()
)


